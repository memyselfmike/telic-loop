{
  "version": 3,
  "sources": ["../../../sanity/src/structure/components/incomingReferencesDecoration/CrossDatasetIncomingReference/CrossDatasetIncomingReferenceType.tsx", "../../../sanity/src/structure/components/incomingReferencesDecoration/CreateNewIncomingReference.tsx", "../../../sanity/src/structure/components/incomingReferencesDecoration/LinkToExistingPreview.tsx", "../../../sanity/src/structure/components/incomingReferencesDecoration/AddIncomingReference.tsx", "../../../sanity/src/structure/components/incomingReferencesDecoration/IncomingReferencesType.tsx", "../../../sanity/src/structure/components/incomingReferencesDecoration/types.ts", "../../../sanity/src/structure/components/incomingReferencesDecoration/IncomingReferencesList.tsx", "../../../sanity/src/structure/components/incomingReferencesDecoration/IncomingReferencesDecoration.tsx", "../../../sanity/src/structure/components/incomingReferencesDecoration/defineIncomingReferenceDecoration.tsx", "../../../sanity/src/structure/components/incomingReferencesDecoration/isIncomingReferenceCreation.ts"],
  "sourcesContent": ["import {Box, Card, Flex, Stack, Text} from '@sanity/ui'\nimport {useCallback, useMemo} from 'react'\nimport {useObservable} from 'react-rx'\nimport {\n  CommandList,\n  type CommandListRenderItemCallback,\n  DEFAULT_STUDIO_CLIENT_OPTIONS,\n  LoadingBlock,\n  useClient,\n  useDocumentPreviewStore,\n  useSchema,\n  useTranslation,\n} from 'sanity'\n\nimport {structureLocaleNamespace} from '../../../i18n'\nimport {INITIAL_STATE} from '../getIncomingReferences'\nimport {INCOMING_REFERENCES_ITEM_HEIGHT, IncomingReferencesListContainer} from '../shared'\nimport {type CrossDatasetIncomingReference} from '../types'\nimport {CrossDatasetIncomingReferenceDocumentPreview} from './CrossDatasetIncomingReferenceDocumentPreview'\nimport {\n  type CrossDatasetIncomingReferenceDocument,\n  getCrossDatasetIncomingReferences,\n} from './getCrossDatasetIncomingReferences'\n\nexport function CrossDatasetIncomingReferenceType({\n  type,\n  referenced,\n  shouldRenderTitle,\n}: {\n  shouldRenderTitle: boolean\n  referenced: {id: string; type: string}\n  type: CrossDatasetIncomingReference\n}) {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const documentPreviewStore = useDocumentPreviewStore()\n\n  const references$ = useMemo(\n    () =>\n      getCrossDatasetIncomingReferences({\n        documentId: referenced.id,\n        client,\n        type: type,\n        documentPreviewStore,\n      }),\n    [client, type, referenced.id, documentPreviewStore],\n  )\n\n  const {documents, loading} = useObservable(references$, INITIAL_STATE)\n\n  const schema = useSchema()\n  const {t} = useTranslation(structureLocaleNamespace)\n  const schemaType = schema.get(type.type)\n\n  const renderItem = useCallback<\n    CommandListRenderItemCallback<CrossDatasetIncomingReferenceDocument>\n  >(\n    (document) => <CrossDatasetIncomingReferenceDocumentPreview document={document} type={type} />,\n    [type],\n  )\n\n  if (!schemaType) return null\n  if (loading) {\n    return <LoadingBlock showText title={t('incoming-references-input.types-loading')} />\n  }\n  return (\n    <Stack space={2} marginBottom={2}>\n      {shouldRenderTitle && (\n        <Box paddingY={2} paddingX={0}>\n          <Text size={1} weight=\"medium\">\n            {type.title || schemaType?.title}\n          </Text>\n        </Box>\n      )}\n      <Card radius={2} padding={1} border tone=\"default\">\n        {documents && documents.length > 0 ? (\n          <IncomingReferencesListContainer $itemCount={documents.length}>\n            <CommandList\n              activeItemDataAttr=\"data-hovered\"\n              ariaLabel={t('incoming-references-input.list-label', {\n                type: type.title || schemaType?.title,\n              })}\n              canReceiveFocus\n              fixedHeight\n              getItemKey={(index) => documents[index].id}\n              itemHeight={INCOMING_REFERENCES_ITEM_HEIGHT}\n              items={documents}\n              onlyShowSelectionWhenActive\n              overscan={5}\n              renderItem={renderItem}\n              wrapAround={false}\n            />\n          </IncomingReferencesListContainer>\n        ) : (\n          <>\n            <Flex align=\"center\" justify=\"center\" padding={2}>\n              <Text size={1} muted>\n                {t('incoming-references-input.no-items')}\n              </Text>\n            </Flex>\n          </>\n        )}\n      </Card>\n    </Stack>\n  )\n}\n", "import {uuid} from '@sanity/uuid'\nimport {useCallback, useMemo} from 'react'\nimport {\n  CreateReferenceButton,\n  type CreateReferenceOption,\n  getPublishedId,\n  isNonNullable,\n  useReferenceInputOptions,\n} from 'sanity'\nimport {useRouter} from 'sanity/router'\n\nimport {usePaneRouter} from '../paneRouter'\nimport {type IncomingReferenceCreationParams} from './isIncomingReferenceCreation'\nimport {type IncomingReferencesOptions} from './types'\n\nexport function CreateNewIncomingReference({\n  type,\n  referenceToId,\n  referenceToType,\n  onCreateNewReference,\n  fieldName,\n  creationAllowed,\n}: {\n  type: string\n  referenceToId: string\n  referenceToType: string\n  onCreateNewReference: (id: string) => void\n  fieldName: string\n  creationAllowed: IncomingReferencesOptions['creationAllowed']\n}) {\n  const {initialValueTemplateItems} = useReferenceInputOptions()\n\n  const {navigate} = useRouter()\n  const {routerPanesState, groupIndex} = usePaneRouter()\n\n  const handleCreate = useCallback(\n    (option: CreateReferenceOption) => {\n      const id = uuid()\n      navigate({\n        panes: [\n          ...routerPanesState.slice(0, groupIndex + 1),\n          [\n            {\n              id: getPublishedId(id),\n              params: {type, template: option.template.id},\n              payload: {\n                reference: {\n                  _type: 'reference',\n                  _ref: referenceToId,\n                  _weak: true,\n                  _strengthenOnPublish: {type: referenceToType},\n                },\n                from: {fieldName, type: referenceToType},\n                // eslint-disable-next-line camelcase\n                __internal_isIncomingReferenceCreation: true,\n              } satisfies IncomingReferenceCreationParams,\n            },\n          ],\n        ],\n      })\n      onCreateNewReference(id)\n    },\n    [\n      type,\n      navigate,\n      routerPanesState,\n      groupIndex,\n      referenceToId,\n      referenceToType,\n      onCreateNewReference,\n      fieldName,\n    ],\n  )\n\n  const createOptions = useMemo(() => {\n    if (!creationAllowed) return []\n    return (initialValueTemplateItems || [])\n\n      .filter((i) => {\n        const typeMatch = type === i.template?.schemaType\n        if (Array.isArray(creationAllowed)) {\n          // Check if the template id is in the creationAllowed array\n          return typeMatch && creationAllowed.includes(i.template.id)\n        }\n        return typeMatch\n      })\n      .map((item): CreateReferenceOption | undefined =>\n        item.template?.schemaType\n          ? {\n              id: item.id,\n              title: item.title || `${item.template.schemaType} from template ${item.template?.id}`,\n              i18n: item.i18n,\n              type: item.template.schemaType,\n              icon: item.icon,\n              template: {\n                id: item.template?.id,\n                params: item.parameters,\n              },\n\n              permission: {granted: item.granted, reason: item.reason},\n            }\n          : undefined,\n      )\n      .filter(isNonNullable)\n  }, [creationAllowed, initialValueTemplateItems, type])\n\n  if (!creationAllowed) {\n    return null\n  }\n  return (\n    <CreateReferenceButton\n      id={`create-new-incoming-reference-${type}`}\n      createOptions={createOptions}\n      onCreate={handleCreate}\n    />\n  )\n}\n", "import {type SchemaType} from '@sanity/types'\nimport {Text} from '@sanity/ui'\nimport {useMemo} from 'react'\nimport {useObservable} from 'react-rx'\nimport {\n  type DocumentPreviewStore,\n  getPreviewStateObservable,\n  getPreviewValueWithFallback,\n  getReleaseIdFromReleaseDocumentId,\n  getReleaseTone,\n  getVersionFromId,\n  isDraftId,\n  isPublishedId,\n  isVersionId,\n  PreviewCard,\n  SanityDefaultPreview,\n  useActiveReleases,\n  useTranslation,\n  VersionInlineBadge,\n} from 'sanity'\n\nexport interface LinkToExistingPreviewProps {\n  documentPreviewStore: DocumentPreviewStore\n  schemaType: SchemaType\n  value: {_id: string; _type: string}\n  onLinkToDocument: () => void\n}\n\nconst getPerspective = (id: string) => {\n  if (isDraftId(id)) return ['drafts']\n  if (isVersionId(id)) return [getVersionFromId(id) as string]\n  if (isPublishedId(id)) return ['published']\n  return ['raw']\n}\n\nexport function LinkToExistingPreview(props: LinkToExistingPreviewProps) {\n  const {schemaType, value, onLinkToDocument} = props\n  const {data: releases} = useActiveReleases()\n  const {t} = useTranslation()\n\n  const previewStateObservable = useMemo(() => {\n    return getPreviewStateObservable(\n      props.documentPreviewStore,\n      schemaType,\n      value._id,\n      getPerspective(value._id),\n    )\n  }, [props.documentPreviewStore, schemaType, value._id])\n\n  const {snapshot, original, isLoading} = useObservable(previewStateObservable, {\n    snapshot: null,\n    isLoading: true,\n    original: null,\n  })\n\n  const badgeProps = useMemo(() => {\n    const id = value._id\n    if (isDraftId(id)) {\n      return {tone: getReleaseTone('drafts'), text: t('release.chip.draft')}\n    }\n    if (isPublishedId(id)) {\n      return {tone: getReleaseTone('published'), text: t('release.chip.published')}\n    }\n    if (isVersionId(id)) {\n      const releaseId = getVersionFromId(id)\n      const release = releases.find((r) => getReleaseIdFromReleaseDocumentId(r._id) === releaseId)\n      if (release) {\n        return {tone: getReleaseTone(release), text: release.metadata.title}\n      }\n    }\n    return null\n  }, [releases, value._id, t])\n\n  /**\n   * If the document is not found, for example because it will be unpublished.\n   * Then we don't want to render the preview of it. Because it shouldn't be possible\n   * to link to a document that will be unpublished in this same release\n   */\n  if (!snapshot && !isLoading) return null\n  return (\n    <PreviewCard __unstable_focusRing onClick={onLinkToDocument} as=\"button\" radius={2}>\n      <SanityDefaultPreview\n        {...getPreviewValueWithFallback({snapshot, original, fallback: value})}\n        isPlaceholder={isLoading}\n        icon={schemaType.icon}\n        layout=\"default\"\n        status={\n          badgeProps ? (\n            <Text size={0}>\n              <VersionInlineBadge $tone={badgeProps.tone}>{badgeProps.text}</VersionInlineBadge>\n            </Text>\n          ) : undefined\n        }\n      />\n    </PreviewCard>\n  )\n}\n", "import {DEFAULT_MAX_FIELD_DEPTH} from '@sanity/schema/_internal'\nimport {type SanityDocumentLike} from '@sanity/types'\nimport {Box, Grid, Stack, Text, useToast} from '@sanity/ui'\nimport {useCallback, useMemo, useState} from 'react'\nimport {useObservableEvent} from 'react-rx'\nimport {catchError, concat, filter, map, type Observable, of, scan, switchMap, tap} from 'rxjs'\nimport {\n  createSearch,\n  DEFAULT_STUDIO_CLIENT_OPTIONS,\n  getPublishedId,\n  isDraftId,\n  isNonNullable,\n  isPublishedId,\n  isVersionId,\n  ReferenceAutocomplete,\n  type SanityClient,\n  type SchemaType,\n  type SearchStrategy,\n  useClient,\n  useDocumentPreviewStore,\n  useSchema,\n  useSource,\n  useTranslation,\n} from 'sanity'\n\nimport {structureLocaleNamespace} from '../../i18n'\nimport {CreateNewIncomingReference} from './CreateNewIncomingReference'\nimport {LinkToExistingPreview} from './LinkToExistingPreview'\nimport {type IncomingReferencesOptions} from './types'\n\ninterface ReferenceSearchState {\n  hits: ReferenceSearchHit[]\n  isLoading: boolean\n  searchString?: string\n}\n\ninterface ReferenceOption {\n  value: string\n  hit: ReferenceSearchHit\n}\ninterface ReferenceSearchHit {\n  _id: string\n  _type: string\n}\n\nconst INITIAL_SEARCH_STATE: ReferenceSearchState = {\n  hits: [],\n  isLoading: false,\n}\nconst NO_FILTER = () => true\n\nconst incomingReferenceSearch = (\n  client: SanityClient,\n  schemaType: SchemaType,\n  searchStrategy: SearchStrategy | undefined,\n): ((textTerm: string) => Observable<ReferenceSearchHit[]>) => {\n  const search = createSearch([schemaType], client, {\n    maxDepth: DEFAULT_MAX_FIELD_DEPTH,\n    strategy: searchStrategy,\n    tag: 'search.incoming-reference',\n  })\n  return (textTerm: string) =>\n    search(textTerm, {perspective: 'raw'}).pipe(\n      map(({hits}) => hits.map(({hit}) => hit)),\n      map((docs) => {\n        // We want to collate drafts and published documents into a single entry, but keep the versions as a separate entry\n        const byId: Map<string, SanityDocumentLike> = new Map()\n\n        docs.forEach((doc) => {\n          if (isVersionId(doc._id)) {\n            // We want to preserve version documents as a different entry.\n            byId.set(doc._id, doc)\n            return\n          }\n          const publishedId = getPublishedId(doc._id)\n          const entry = byId.get(publishedId)\n          if (!entry) {\n            byId.set(publishedId, doc)\n            // If the document is a draft and the entry is published, we want to keep the draft.\n          } else if (isDraftId(doc._id) && isPublishedId(entry._id)) {\n            byId.set(publishedId, doc)\n          }\n        })\n        return Array.from(byId.values())\n      }),\n      map((collated) =>\n        collated.map((entry) => ({\n          _id: entry._id,\n          _type: entry._type,\n        })),\n      ),\n      map((docs) => docs.slice(0, 100)),\n    )\n}\n\n/**\n * This component is responsible for two things:\n * 1) Search for the document type to add to the incoming references.\n * 2) Render the CreateNewIncomingReference button. Allowing users to add a new incoming reference.\n */\nexport function AddIncomingReference({\n  type,\n  referenced,\n  onCreateNewReference,\n  onLinkDocument,\n  fieldName,\n  creationAllowed,\n}: {\n  type: string\n  referenced: {id: string; type: string}\n  onCreateNewReference: (id: string) => void\n  onLinkDocument: (documentId: string) => void\n  fieldName: string\n  creationAllowed: IncomingReferencesOptions['creationAllowed']\n}) {\n  const {t} = useTranslation(structureLocaleNamespace)\n  const {push} = useToast()\n  const schema = useSchema()\n  const schemaType = schema.get(type)\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const source = useSource()\n  const {strategy: searchStrategy} = source.search\n  const documentPreviewStore = useDocumentPreviewStore()\n  const handleSearch = useMemo(\n    () => incomingReferenceSearch(client, schemaType!, searchStrategy),\n    [client, schemaType, searchStrategy],\n  )\n\n  const [searchState, setSearchState] = useState(INITIAL_SEARCH_STATE)\n  const handleQueryChange = useObservableEvent((inputValue$: Observable<string | null>) => {\n    return inputValue$.pipe(\n      filter(isNonNullable),\n      switchMap((searchString) =>\n        concat(\n          of({isLoading: true, hits: []}),\n          handleSearch(searchString).pipe(\n            map((hits) => ({hits, searchString, isLoading: false})),\n            catchError((error) => {\n              push({\n                title: 'Reference search failed',\n                description: error.message,\n                status: 'error',\n                id: `reference-search-fail-${type}`,\n              })\n              console.error(error)\n              return of({hits: [], isLoading: false})\n            }),\n          ),\n        ),\n      ),\n\n      scan(\n        (prevState, nextState: ReferenceSearchState) => ({...prevState, ...nextState}),\n        INITIAL_SEARCH_STATE,\n      ),\n\n      tap(setSearchState),\n    )\n  })\n\n  const options: ReferenceOption[] = useMemo(() => {\n    return searchState.hits.map((hit) => ({\n      value: hit._id,\n      hit: hit,\n    }))\n  }, [searchState.hits])\n\n  const handleAutocompleteOpenButtonClick = useCallback(() => {\n    handleQueryChange('')\n  }, [handleQueryChange])\n\n  const renderOption = useCallback(\n    (option: ReferenceOption) => {\n      return (\n        <LinkToExistingPreview\n          onLinkToDocument={() => onLinkDocument(option.value)}\n          documentPreviewStore={documentPreviewStore}\n          schemaType={schemaType!}\n          value={option.hit}\n        />\n      )\n    },\n    [documentPreviewStore, schemaType, onLinkDocument],\n  )\n\n  return (\n    <Stack space={2} padding={2}>\n      <Box paddingY={2}>\n        <Text size={1} weight=\"medium\">\n          {t('incoming-references-input.reference-from', {type})}\n        </Text>\n      </Box>\n      <Grid gap={creationAllowed ? 2 : 0} style={{gridTemplateColumns: '1fr min-content'}}>\n        <ReferenceAutocomplete\n          id={`${type}-autocomplete`}\n          radius={2}\n          autoFocus\n          options={options}\n          placeholder={t('incoming-references-input.type-to-search')}\n          onQueryChange={handleQueryChange}\n          filterOption={NO_FILTER}\n          path={[]}\n          // @ts-expect-error - Types are not derived correctly\n          renderOption={renderOption}\n          openButton={{onClick: handleAutocompleteOpenButtonClick}}\n          referenceElement={null}\n          loading={searchState.isLoading}\n        />\n        <CreateNewIncomingReference\n          type={type}\n          referenceToId={referenced.id}\n          referenceToType={referenced.type}\n          creationAllowed={creationAllowed}\n          onCreateNewReference={onCreateNewReference}\n          fieldName={fieldName}\n        />\n      </Grid>\n    </Stack>\n  )\n}\n", "import {AddIcon} from '@sanity/icons'\nimport {type SanityDocument} from '@sanity/types'\nimport {Box, Card, Flex, Stack, Text, useToast} from '@sanity/ui'\nimport {useCallback, useEffect, useMemo, useState} from 'react'\nimport {useObservable} from 'react-rx'\nimport {\n  CommandList,\n  type CommandListRenderItemCallback,\n  DEFAULT_STUDIO_CLIENT_OPTIONS,\n  getDraftId,\n  getPublishedId,\n  isPublishedId,\n  LoadingBlock,\n  SanityDefaultPreview,\n  useClient,\n  useDocumentPreviewStore,\n  useSchema,\n  useSource,\n  useTranslation,\n} from 'sanity'\n\nimport {Button} from '../../../ui-components/button/Button'\nimport {structureLocaleNamespace} from '../../i18n'\nimport {useDocumentPane} from '../../panes/document/useDocumentPane'\nimport {AddIncomingReference} from './AddIncomingReference'\nimport {CreateNewIncomingReference} from './CreateNewIncomingReference'\nimport {getIncomingReferences, INITIAL_STATE} from './getIncomingReferences'\nimport {IncomingReferenceDocument} from './IncomingReferenceDocument'\nimport {INCOMING_REFERENCES_ITEM_HEIGHT, IncomingReferencesListContainer} from './shared'\nimport {type IncomingReferencesOptions, type IncomingReferenceType} from './types'\n\nexport function IncomingReferencesType({\n  type,\n  referenced,\n  onLinkDocument,\n  actions,\n  shouldRenderTitle,\n  fieldName,\n  creationAllowed,\n  filter,\n  filterParams,\n}: {\n  shouldRenderTitle: boolean\n  referenced: {id: string; type: string}\n  fieldName: string\n  type: IncomingReferenceType\n  onLinkDocument: IncomingReferencesOptions['onLinkDocument']\n  actions: IncomingReferencesOptions['actions']\n  creationAllowed: IncomingReferencesOptions['creationAllowed']\n  filter: IncomingReferencesOptions['filter']\n  filterParams: IncomingReferencesOptions['filterParams']\n}) {\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {displayed} = useDocumentPane()\n  const {getClient} = useSource()\n  const displayedId = displayed?._id as string\n  const references$ = useMemo(\n    () =>\n      getIncomingReferences({\n        documentId: displayedId,\n        documentPreviewStore,\n        type: type.type,\n        filter,\n        filterParams,\n        getClient,\n      }),\n    [documentPreviewStore, type, filter, filterParams, displayedId, getClient],\n  )\n\n  const {documents, loading} = useObservable(references$, INITIAL_STATE)\n\n  const schema = useSchema()\n  const {t} = useTranslation(structureLocaleNamespace)\n  const schemaType = schema.get(type.type)\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const [isAdding, setIsAdding] = useState(false)\n  const [newReferenceId, setNewReferenceId] = useState<string | null>(null)\n  const {editState} = useDocumentPane()\n  const toast = useToast()\n  const handleAdd = useCallback(() => {\n    setIsAdding((p) => !p)\n  }, [])\n\n  const publishedExists = Boolean(editState?.published)\n\n  const handleCreateNewReference = useCallback(async (documentId: string) => {\n    setIsAdding(false)\n    setNewReferenceId(documentId)\n  }, [])\n\n  const handleLinkDocument = useCallback(\n    async (documentId: string) => {\n      setIsAdding(false)\n      setNewReferenceId(documentId)\n      const liveEdit = Boolean(schemaType?.liveEdit)\n      const document = await client.fetch('*[_id == $id][0]', {id: documentId})\n\n      const linkedDocument = onLinkDocument?.(document, {\n        _type: 'reference',\n        _ref: getPublishedId(referenced.id),\n        ...(publishedExists ? {} : {_weak: true, _strengthenOnPublish: {type: referenced.type}}),\n      })\n      if (!linkedDocument) {\n        setNewReferenceId(null)\n        toast.push({\n          title: 'Not possible to link to document',\n          description: 'The document you are trying to link cannot be linked to',\n          status: 'error',\n        })\n        return\n      }\n\n      // if the document is published and the schema is not live edit, we want to update the draft id, not the published id\n      // If it's a version, we can update the version document.\n      if (isPublishedId(documentId) && !liveEdit) {\n        linkedDocument._id = getDraftId(documentId)\n      }\n      await client.createOrReplace(linkedDocument)\n    },\n    [client, onLinkDocument, referenced, publishedExists, toast, schemaType?.liveEdit],\n  )\n\n  useEffect(() => {\n    if (documents.length > 0 && newReferenceId) {\n      // new reference is now part of the documents, we need to remove it from the newReferenceId state\n      const isAdded = documents.find(\n        (document) => getPublishedId(document._id) === getPublishedId(newReferenceId),\n      )\n      if (isAdded) setNewReferenceId(null)\n    }\n  }, [documents, newReferenceId])\n\n  const renderItem = useCallback<CommandListRenderItemCallback<SanityDocument>>(\n    (document) => (\n      <IncomingReferenceDocument\n        document={document}\n        referenceToId={referenced.id}\n        actions={actions}\n      />\n    ),\n    [referenced.id, actions],\n  )\n\n  if (!schemaType) return null\n  if (loading) {\n    return <LoadingBlock showText title={t('incoming-references-input.types-loading')} />\n  }\n  return (\n    <Stack space={2} marginBottom={2}>\n      {shouldRenderTitle && (\n        <Box paddingY={2} paddingX={0}>\n          <Text size={1} weight=\"medium\">\n            {type.title || schemaType?.title}\n          </Text>\n        </Box>\n      )}\n      <Card radius={2} padding={1} border tone=\"default\">\n        {documents.length > 0 ? (\n          <IncomingReferencesListContainer $itemCount={documents.length}>\n            <CommandList\n              activeItemDataAttr=\"data-hovered\"\n              ariaLabel={t('incoming-references-input.list-label', {\n                type: type.title || schemaType?.title,\n              })}\n              canReceiveFocus\n              fixedHeight\n              getItemKey={(index) => documents[index]._id}\n              itemHeight={INCOMING_REFERENCES_ITEM_HEIGHT}\n              items={documents}\n              onlyShowSelectionWhenActive\n              overscan={5}\n              renderItem={renderItem}\n              wrapAround={false}\n            />\n          </IncomingReferencesListContainer>\n        ) : (\n          <>\n            <Flex\n              align=\"center\"\n              justify=\"center\"\n              padding={2}\n              hidden={isAdding || Boolean(newReferenceId)}\n            >\n              <Text size={1} muted>\n                {t('incoming-references-input.no-items')}\n              </Text>\n            </Flex>\n          </>\n        )}\n\n        {newReferenceId && (\n          <SanityDefaultPreview icon={schemaType.icon} layout={'default'} isPlaceholder />\n        )}\n        {isAdding && (\n          <AddIncomingReference\n            type={type.type}\n            referenced={referenced}\n            onCreateNewReference={handleCreateNewReference}\n            onLinkDocument={handleLinkDocument}\n            creationAllowed={creationAllowed}\n            fieldName={fieldName}\n          />\n        )}\n      </Card>\n      {onLinkDocument ? (\n        <Button\n          size=\"large\"\n          disabled={false}\n          icon={AddIcon}\n          mode=\"ghost\"\n          onClick={handleAdd}\n          text={t('incoming-references-input.add-reference-item')}\n        />\n      ) : (\n        <CreateNewIncomingReference\n          type={type.type}\n          referenceToId={referenced.id}\n          referenceToType={referenced.type}\n          creationAllowed={creationAllowed}\n          onCreateNewReference={handleCreateNewReference}\n          fieldName={fieldName}\n        />\n      )}\n    </Stack>\n  )\n}\n", "import {type SelectableTone} from '@sanity/ui'\nimport {\n  type ActionComponent,\n  type DocumentActionDialogProps,\n  type PreviewConfig,\n  type SanityClient,\n  type SanityDocument,\n} from 'sanity'\n\nexport type IncomingReferenceActionsContext = {\n  /**\n   * The document that is linked to the reference.\n   */\n  document: SanityDocument\n  getClient: (options: {apiVersion: string}) => SanityClient\n}\n\nexport type IncomingReferenceActionDescription = {\n  label: string\n  icon?: React.ElementType\n  tone?: SelectableTone\n  disabled?: boolean\n  onHandle: (() => Promise<void>) | (() => void)\n  dialog?: DocumentActionDialogProps | false | null\n}\n\n/**\n * Incoming reference action component definition.\n * Allows users to define actions that will be shown in the IncomingReferences component as part\n * of each reference\n * example:\n * ```ts\n * export const LogReferenceAction: IncomingReferenceAction = ({document, getClient}) => {\n *   return {\n *     label: 'Log reference',\n *     icon: LogIcon,\n *     onHandle: () => console.log(document._id)\n *   }\n * }\n * ```\n *\n * @beta\n */\nexport type IncomingReferenceAction = ActionComponent<\n  IncomingReferenceActionsContext,\n  IncomingReferenceActionDescription\n>\n\nexport interface CrossDatasetIncomingReference {\n  type: string\n  title?: string\n  dataset: string\n  preview: PreviewConfig\n  studioUrl?: (document: {id: string; type?: string}) => string | null\n}\n\nexport interface IncomingReferenceType {\n  type: string\n  dataset?: never\n  title?: string\n}\n\nexport function isIncomingReferenceType(\n  type: IncomingReferenceType | CrossDatasetIncomingReference,\n): type is IncomingReferenceType {\n  return !type.dataset\n}\n\nexport function isCrossDatasetIncomingReference(\n  type: IncomingReferenceType | CrossDatasetIncomingReference,\n): type is CrossDatasetIncomingReference {\n  return Boolean(type.dataset)\n}\n\nexport type IncomingReferencesFilterResolver = (context: {\n  document: SanityDocument | undefined\n  getClient: (options: {apiVersion: string}) => SanityClient\n}) =>\n  | string\n  | {filter: string; filterParams?: Record<string, string>}\n  | Promise<{filter: string; filterParams?: Record<string, string>}>\n\nexport type IncomingReferencesOptions = {\n  name: string\n  title?: string\n  description?: string\n  /**\n   * The type of the incoming references.\n   */\n  types: (IncomingReferenceType | CrossDatasetIncomingReference)[]\n\n  /**\n   * The filter query to apply to the incoming references in addition to the type filter.\n   * For example: filter all books that are from an specific editorial brand: `editorialBrand == \"Random House\"`\n   * The `_type` filter is applied automatically.\n   */\n  filter?: string | IncomingReferencesFilterResolver\n  filterParams?: Record<string, string>\n\n  /**\n   * Callback to link a document to a reference.\n   *\n   * This function is called when a user wants to link an existing document to the current document.\n   * It receives two parameters:\n   * - The document that will be linked (the target document)\n   * - The reference object with all properties needed to establish the link\n   *\n   * The developer must implement this function to define where and how the reference\n   * should be placed within the document structure. The function should return the\n   * modified document with the reference properly added.\n   *\n   * For example:\n   *  - We want to link a book to an author:\n   * ```ts\n   *  onLinkDocument: (document, reference) => {\n   *   return {\n   *     ...document,\n   *     author: reference,\n   *   }\n   *  }\n   * ```\n   *\n   *\n   * @param document - The document to link to the reference.\n   * @param reference - The reference to link to the document.\n   * @returns The document to link to the reference. If false, the document will not be linked to the reference.\n   */\n\n  onLinkDocument?: (\n    document: SanityDocument,\n    reference: {\n      _type: 'reference'\n      _ref: string\n      _weak?: boolean\n      _strengthenOnPublish?: {\n        type: string\n      }\n    },\n  ) => SanityDocument | false\n  /**\n   * Callback to define the actions that will be shown for the incoming reference document.\n   *\n   * For example:\n   * ```ts\n   * actions: ({document, client}) => {\n   *   return [\n   *     {label: 'Unlink document',\n   *     icon: TrashIcon,\n   *     tone: 'critical',\n   *     onClick: async () => {\n   *       await client.createOrReplace({...document, _id: getDraftId(document._id), author: undefined})\n   *     }\n   *   }\n   *  ]\n   * }\n   * ```\n   * @param context - The context of the linked document.\n   * @returns The actions that will be shown for the linked document.\n\n   */\n  actions?: IncomingReferenceAction[]\n  /**\n   * Whether to allow creation of new references.\n   * default: true\n   *\n   * If false, it will only be possible to link to existing documents, if the `onLinkDocument` callback is provided.\n   * If true, it will be possible to create new references to any template of the type.\n   * If an array is provided, it will only be possible to create new references that match the template id in the array provided.\n   *\n   * To define how a creation will be handled, you can use the `initialValue` option in the\n   * document type that will be linked.\n   *\n   * For example:\n   * I want to create a new book from an author:\n   * In the author we will have the <IncomingReferenceInput /> with the creationAllowed set to true.\n   *\n   * Then in the book type, we will have the `initialValue` option to define the default values for the new book.\n   * This initialValue callback will receive the `reference` object that needs to be linked to the book in the params.\n   *\n   * ```ts\n   * // Book type\n   * export default {\n   *   type: 'document',\n   *   name: 'book',\n   *   title: 'Book',\n   *   fields: [\n   *     {\n   *       name: 'author',\n   *       type: 'reference',\n   *       to: [{type: 'author'}],\n   *     },\n   *   ],\n   *   initialValue: (params) => {\n   *    return {\n   *      author: params?.reference,\n   *    }\n   *  }\n   * ```\n   */\n  creationAllowed?: boolean | string[]\n}\n", "import {Card, Flex, Stack, Text} from '@sanity/ui'\nimport {useTranslation} from 'sanity'\n\nimport {structureLocaleNamespace} from '../../i18n'\nimport {useDocumentPane} from '../../panes/document/useDocumentPane'\nimport {CrossDatasetIncomingReferenceType} from './CrossDatasetIncomingReference/CrossDatasetIncomingReferenceType'\nimport {IncomingReferencesType} from './IncomingReferencesType'\nimport {type IncomingReferencesOptions, isCrossDatasetIncomingReference} from './types'\n\nexport function IncomingReferencesList({\n  types,\n  onLinkDocument,\n  actions,\n  filter,\n  filterParams,\n  name,\n  creationAllowed,\n}: IncomingReferencesOptions) {\n  const {documentId, documentType} = useDocumentPane()\n  const {t} = useTranslation(structureLocaleNamespace)\n\n  if (!types || types?.length === 0) {\n    return (\n      <Card border radius={2} padding={3} tone=\"critical\">\n        <Flex align=\"center\" justify=\"center\">\n          <Text size={1} muted>\n            {t('incoming-references-input.types-not-defined')}\n          </Text>\n        </Flex>\n      </Card>\n    )\n  }\n\n  return (\n    <Stack space={3}>\n      {types.map((type) => {\n        if (isCrossDatasetIncomingReference(type)) {\n          return (\n            <CrossDatasetIncomingReferenceType\n              key={`${type.type}-${type.dataset || ''}`}\n              type={type}\n              referenced={{id: documentId, type: documentType}}\n              shouldRenderTitle={types.length > 1}\n            />\n          )\n        }\n        return (\n          <IncomingReferencesType\n            key={type.type}\n            type={type}\n            referenced={{id: documentId, type: documentType}}\n            onLinkDocument={onLinkDocument}\n            actions={actions}\n            shouldRenderTitle={types.length > 1}\n            fieldName={name}\n            creationAllowed={creationAllowed}\n            filter={filter}\n            filterParams={filterParams}\n          />\n        )\n      })}\n    </Stack>\n  )\n}\n", "import {Box, Flex, Stack, Text} from '@sanity/ui'\nimport {startCase} from 'lodash-es'\n\nimport {IncomingReferencesList} from './IncomingReferencesList'\nimport {type IncomingReferencesOptions} from './types'\n\n/**\n * @beta\n */\nexport function IncomingReferencesDecoration(\n  props: IncomingReferencesOptions & {\n    name: string\n    title?: string\n    description?: string\n  },\n) {\n  const {\n    onLinkDocument,\n    actions,\n    filter,\n    filterParams,\n    name,\n    creationAllowed = true,\n    types,\n    title,\n    description,\n  } = props\n\n  return (\n    <Stack space={2}>\n      <Box paddingY={2}>\n        <Stack space={3}>\n          <Flex align=\"center\" paddingY={1}>\n            <Text as=\"label\" weight=\"medium\" size={1}>\n              {title || startCase(name)}\n            </Text>\n          </Flex>\n\n          {description && (\n            <Text muted size={1}>\n              {description}\n            </Text>\n          )}\n        </Stack>\n      </Box>\n      <IncomingReferencesList\n        name={name}\n        types={types}\n        onLinkDocument={onLinkDocument}\n        actions={actions}\n        filter={filter}\n        filterParams={filterParams}\n        creationAllowed={creationAllowed}\n      />\n    </Stack>\n  )\n}\n", "import {type DecorationMember} from 'sanity'\n\nimport {IncomingReferencesDecoration} from './IncomingReferencesDecoration'\nimport {type IncomingReferencesOptions} from './types'\n\n/**\n * Helper function to define an incoming references decoration.\n *\n * example:\n * ```ts\n * defineType({\n *   name: 'author',\n *   type: 'document',\n *   renderMembers: (members) => {\n *    return [\n *      ...members,\n *      defineIncomingReferenceDecoration({\n *        name: 'incomingReferences',\n *        title: 'Incoming references',\n *        types: [{type: 'author'}],\n *      }),\n *    ]\n *   },\n * })\n * ```\n *\n * @beta\n */\nexport function defineIncomingReferenceDecoration(\n  options: IncomingReferencesOptions,\n): DecorationMember {\n  return {\n    kind: 'decoration',\n    key: options.name,\n    component: <IncomingReferencesDecoration {...options} />,\n  }\n}\n", "import {type DocumentDefinition} from 'sanity'\n\nexport interface IncomingReferenceCreationParams {\n  reference: {\n    _type: 'reference'\n    _ref: string\n    _weak?: boolean\n    _strengthenOnPublish?: {\n      type: string\n    }\n  }\n  from: {\n    fieldName: string\n    type: string\n  }\n  __internal_isIncomingReferenceCreation: true\n  [key: string]: unknown\n}\n\n/**\n * Helper function to check if the document is being created from an incoming reference.\n * It will be used in the initialValue callback to determine if the document is being created from an incoming reference.\n *\n * example:\n * ```ts\n * defineType({\n *   name: 'book',\n *   type: 'document',\n *   fields: [...],\n *   initialValue: (params) => {\n *     // If the document is being created from an incoming reference, return the reference\n *     // Otherwise, return undefined\n *     return {\n *       author: isIncomingReferenceCreation(params) ? params.reference : undefined,\n *     }\n *   },\n * })\n * ```\n *\n * @beta\n */\nexport function isIncomingReferenceCreation(\n  initialValue: DocumentDefinition['initialValue'],\n): initialValue is IncomingReferenceCreationParams {\n  return (\n    typeof initialValue === 'object' &&\n    initialValue !== null &&\n    '__internal_isIncomingReferenceCreation' in initialValue\n  )\n}\n"],
  "mappings": "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",
  "names": ["CrossDatasetIncomingReferenceType", "t0", "$", "_c", "type", "referenced", "shouldRenderTitle", "client", "useClient", "DEFAULT_STUDIO_CLIENT_OPTIONS", "documentPreviewStore", "useDocumentPreviewStore", "t1", "id", "getCrossDatasetIncomingReferences", "documentId", "references$", "documents", "loading", "useObservable", "INITIAL_STATE", "schema", "useSchema", "t", "useTranslation", "structureLocaleNamespace", "T0", "T1", "t10", "t2", "t3", "t4", "t5", "t6", "t7", "t8", "t9", "Symbol", "for", "bb0", "schemaType", "get", "t11", "document", "renderItem", "t12", "t13", "Stack", "title", "Card", "length", "index", "INCOMING_REFERENCES_ITEM_HEIGHT", "CreateNewIncomingReference", "referenceToId", "referenceToType", "onCreateNewReference", "fieldName", "creationAllowed", "initialValueTemplateItems", "useReferenceInputOptions", "navigate", "useRouter", "routerPanesState", "groupIndex", "usePaneRouter", "option", "uuid", "panes", "slice", "getPublishedId", "params", "template", "payload", "reference", "_type", "_ref", "_weak", "_strengthenOnPublish", "from", "__internal_isIncomingReferenceCreation", "handleCreate", "i", "typeMatch", "Array", "isArray", "includes", "filter", "map", "_temp", "isNonNullable", "createOptions", "item", "i18n", "icon", "parameters", "permission", "granted", "reason", "undefined", "getPerspective", "isDraftId", "isVersionId", "getVersionFromId", "isPublishedId", "LinkToExistingPreview", "props", "value", "onLinkToDocument", "data", "releases", "useActiveReleases", "_id", "getPreviewStateObservable", "previewStateObservable", "snapshot", "isLoading", "original", "getReleaseTone", "tone", "text", "releaseId", "r", "getReleaseIdFromReleaseDocumentId", "release", "find", "metadata", "badgeProps", "getPreviewValueWithFallback", "fallback", "INITIAL_SEARCH_STATE", "hits", "NO_FILTER", "incomingReferenceSearch", "searchStrategy", "search", "createSearch", "maxDepth", "DEFAULT_MAX_FIELD_DEPTH", "strategy", "tag", "textTerm", "perspective", "pipe", "hit", "docs", "byId", "Map", "forEach", "doc", "set", "publishedId", "entry", "values", "collated", "AddIncomingReference", "onLinkDocument", "push", "useToast", "source", "useSource", "handleSearch", "searchState", "setSearchState", "useState", "inputValue$", "switchMap", "searchString", "concat", "of", "catchError", "error", "description", "message", "status", "console", "scan", "tap", "handleQueryChange", "useObservableEvent", "_temp2", "options", "handleAutocompleteOpenButtonClick", "renderOption", "gridTemplateColumns", "t14", "onClick", "t15", "t16", "t17", "t18", "prevState", "nextState", "IncomingReferencesType", "actions", "filterParams", "displayed", "useDocumentPane", "getClient", "displayedId", "getIncomingReferences", "isAdding", "setIsAdding", "newReferenceId", "setNewReferenceId", "editState", "toast", "handleAdd", "publishedExists", "Boolean", "published", "handleCreateNewReference", "liveEdit", "documentId_0", "fetch", "linkedDocument", "getDraftId", "createOrReplace", "handleLinkDocument", "document_0", "useEffect", "document_1", "AddIcon", "p", "isCrossDatasetIncomingReference", "dataset", "IncomingReferencesList", "types", "name", "documentType", "IncomingReferencesDecoration", "startCase", "defineIncomingReferenceDecoration", "kind", "key", "component", "isIncomingReferenceCreation", "initialValue"]
}
