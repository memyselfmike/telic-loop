---
import type { GetStaticPaths, Page } from 'astro';
import BaseLayout from '../../layouts/BaseLayout.astro';
import BlogCard from '../../components/BlogCard.astro';

// Post type definition
interface BlogPost {
  title: string;
  slug: string;
  date: string;
  excerpt: string;
  categories: string[];
}

export const getStaticPaths: GetStaticPaths = async ({ paginate }) => {
  // Placeholder posts ‚Äî will be replaced with Sanity data in Epic 2
  const posts: BlogPost[] = [
    {
      title: 'How to Optimise Your LinkedIn Profile for B2B Lead Generation',
      slug: 'optimise-linkedin-profile-b2b',
      date: '2024-11-15',
      excerpt: 'Your LinkedIn profile is your digital business card. Here is how to make it work harder for your lead generation efforts.',
      categories: ['LinkedIn Profile', 'LinkedIn Tips'],
    },
    {
      title: 'The BEEP Method Explained: A Step-by-Step Guide',
      slug: 'beep-method-explained',
      date: '2024-11-08',
      excerpt: 'Build, Engage, Educate, Promote ‚Äî we break down each phase of our proven methodology and explain why the order matters.',
      categories: ['LinkedIn Marketing', 'B2B'],
    },
    {
      title: '5 LinkedIn Connection Request Mistakes That Kill Your Response Rate',
      slug: 'linkedin-connection-request-mistakes',
      date: '2024-11-01',
      excerpt: 'Most people get ignored on LinkedIn because they lead with the wrong message. Avoid these five common errors.',
      categories: ['LinkedIn Tips', 'Social Selling'],
    },
    {
      title: 'Thought Leadership on LinkedIn: From Zero to Authority in 90 Days',
      slug: 'thought-leadership-linkedin-90-days',
      date: '2024-10-25',
      excerpt: 'Authority is built by consistently sharing valuable insight. Here is the exact content framework we use for our thought leadership clients.',
      categories: ['Thought Leadership', 'Authority Marketing'],
    },
    {
      title: 'Why Relationship Selling Beats Cold Outreach Every Time',
      slug: 'relationship-selling-vs-cold-outreach',
      date: '2024-10-18',
      excerpt: 'Cold messages get a 1 to 3 percent response rate. Warm relationship-based outreach gets 20 to 40 percent. The data speaks for itself.',
      categories: ['Relationship Selling', 'B2B'],
    },
    {
      title: 'LinkedIn Training for Sales Teams: What Works and What Doesnt',
      slug: 'linkedin-training-sales-teams',
      date: '2024-10-11',
      excerpt: 'After training hundreds of sales professionals, here are the techniques that actually change behaviour and the ones that do not.',
      categories: ['LinkedIn Training', 'Social Selling'],
    },
    {
      title: 'How to Use LinkedIn Analytics to Improve Your Content Strategy',
      slug: 'linkedin-analytics-content-strategy',
      date: '2024-10-04',
      excerpt: 'Most LinkedIn users ignore their analytics. Here is how to read the data and use it to double your organic reach.',
      categories: ['LinkedIn Tips', 'LinkedIn Marketing'],
    },
    {
      title: 'B2B Lead Generation in 2025: What Has Changed on LinkedIn',
      slug: 'b2b-lead-generation-2025',
      date: '2024-09-27',
      excerpt: 'LinkedIn algorithm and audience behaviour has shifted. Here is what is working now and what you should stop doing immediately.',
      categories: ['B2B', 'LinkedIn Marketing'],
    },
    {
      title: 'The Social Selling Index: Does It Actually Matter?',
      slug: 'social-selling-index-does-it-matter',
      date: '2024-09-20',
      excerpt: 'LinkedIn SSI score gets a lot of attention. We take an honest look at whether it correlates with real lead generation results.',
      categories: ['Social Selling', 'LinkedIn Tips'],
    },
    {
      title: 'Building a B2B Content Calendar for LinkedIn',
      slug: 'b2b-content-calendar-linkedin',
      date: '2024-09-13',
      excerpt: 'Consistency is the single biggest factor in LinkedIn content success. Here is how to build a realistic content calendar you will actually follow.',
      categories: ['B2B', 'Thought Leadership'],
    },
    {
      title: 'How to Write a LinkedIn Post That Gets Engagement',
      slug: 'linkedin-post-engagement-guide',
      date: '2024-09-06',
      excerpt: 'Structure, hooks, and the algorithm ‚Äî these are the three levers that determine whether your posts get seen or ignored.',
      categories: ['LinkedIn Tips', 'Authority Marketing'],
    },
    {
      title: 'LinkedIn Premium vs Sales Navigator: Which Should You Use?',
      slug: 'linkedin-premium-vs-sales-navigator',
      date: '2024-08-30',
      excerpt: 'Both tools cost money. Here is an honest comparison of what you get for your budget and which is right for your business stage.',
      categories: ['LinkedIn Marketing', 'B2B'],
    },
  ];

  return paginate(posts, { pageSize: 10 });
};

type Props = {
  page: Page<BlogPost>;
};

const { page } = Astro.props;

const categories = [
  'Authority Marketing',
  'B2B',
  'LinkedIn Marketing',
  'LinkedIn Profile',
  'LinkedIn Tips',
  'LinkedIn Training',
  'Relationship Selling',
  'Social Selling',
  'Thought Leadership',
];

const currentPath = Astro.url.pathname;
const isFirstPage = !currentPath.includes('/blog/') || currentPath === '/blog/1';
---

<BaseLayout
  title={`Blog ‚Äî LinkedIn Lead Generation Insights | Beep2B${page.currentPage > 1 ? ` ‚Äî Page ${page.currentPage}` : ''}`}
  description="Expert articles on LinkedIn lead generation, B2B marketing, thought leadership, and social selling ‚Äî from the Beep2B team."
>
  <main>

    <!-- Page Hero -->
    <section class="bg-brand py-12 px-4">
      <div class="max-w-4xl mx-auto">
        <p class="text-primary-300 text-sm font-semibold uppercase tracking-widest mb-2">
          Resources
        </p>
        <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">
          The Beep2B Blog
        </h1>
        <p class="text-primary-100 max-w-xl">
          Practical insights on LinkedIn lead generation, B2B marketing, and the BEEP methodology.
        </p>
      </div>
    </section>

    <!-- Category filter bar -->
    <nav aria-label="Blog categories" class="bg-white border-b border-slate-200 px-4 py-3 sticky top-16 z-30">
      <div class="max-w-5xl mx-auto overflow-x-auto">
        <ul class="flex gap-2 min-w-max">
          <li>
            <a
              href="/blog"
              class={`inline-block px-3 py-1 rounded-full text-sm font-medium transition-colors ${
                isFirstPage
                  ? 'bg-primary-800 text-white'
                  : 'bg-slate-100 text-slate-600 hover:bg-slate-200'
              }`}
            >
              All Posts
            </a>
          </li>
          {categories.map((cat) => (
            <li>
              <a
                href={`/blog/category/${cat.toLowerCase().replace(/\s+/g, '-')}`}
                class="inline-block px-3 py-1 rounded-full text-sm font-medium bg-slate-100 text-slate-600 hover:bg-primary-50 hover:text-primary-700 transition-colors"
              >
                {cat}
              </a>
            </li>
          ))}
        </ul>
      </div>
    </nav>

    <!-- Post grid -->
    <section class="py-12 px-4 bg-slate-50">
      <div class="max-w-5xl mx-auto">

        {page.data.length === 0 ? (
          <div class="text-center py-20">
            <div class="text-4xl mb-4">üìù</div>
            <h2 class="text-xl font-semibold text-slate-700 mb-2">No posts yet</h2>
            <p class="text-slate-500">Check back soon ‚Äî we publish new articles every week.</p>
          </div>
        ) : (
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            {page.data.map((post) => (
              <BlogCard
                title={post.title}
                slug={post.slug}
                date={post.date}
                excerpt={post.excerpt}
                categories={post.categories}
              />
            ))}
          </div>
        )}

        <!-- Pagination -->
        {(page.url.prev || page.url.next) && (
          <nav aria-label="Pagination" class="mt-12 flex items-center justify-center gap-4">
            {page.url.prev ? (
              <a
                href={page.url.prev}
                class="flex items-center gap-2 px-4 py-2 bg-white border border-slate-300 rounded-md text-sm font-medium text-slate-700 hover:bg-slate-50 transition-colors"
                aria-label="Previous page"
              >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
                Previous
              </a>
            ) : (
              <span class="flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium text-slate-300 cursor-not-allowed" aria-disabled="true">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
                Previous
              </span>
            )}

            <span class="text-sm text-slate-500">
              Page {page.currentPage} of {page.lastPage}
            </span>

            {page.url.next ? (
              <a
                href={page.url.next}
                class="flex items-center gap-2 px-4 py-2 bg-white border border-slate-300 rounded-md text-sm font-medium text-slate-700 hover:bg-slate-50 transition-colors"
                aria-label="Next page"
              >
                Next
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </a>
            ) : (
              <span class="flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium text-slate-300 cursor-not-allowed" aria-disabled="true">
                Next
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </span>
            )}
          </nav>
        )}

      </div>
    </section>

  </main>
</BaseLayout>
